\PassOptionsToPackage{table,svgnames,dvipsnames}{xcolor}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\usepackage[sc, osf]{mathpazo}
\linespread{1.025}
\usepackage[euler-digits,small]{eulervm}
\setkomafont{disposition}{\normalfont\bfseries}
\frenchspacing
\usepackage{pifont}% http://ctan.org/pkg/pifont
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%

\usepackage[american]{babel}
\usepackage[autostyle, english = american]{csquotes}
\usepackage[%
  backend=biber,
  url=false,
  style=alphabetic,
  backref=true,
  hyperref=true,
  maxnames=4,
  minnames=3,
  maxbibnames=99,
  firstinits,
  uniquename=init]{biblatex}
\DefineBibliographyStrings{english}{%
  backrefpage = {see p.},
  backrefpages = {see pp.}
}
\addbibresource{../bibliography.bib}

\usepackage{graphicx}
\graphicspath{ {../figures/} }
\usepackage[prependcaption, textsize=tiny]{todonotes}
\usepackage{rotating}
\usepackage{tikz}

\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usepackage{booktabs}
\usepackage{xspace}
\usepackage{etoolbox} % for notblank (brackets only when argument)
\usepackage{xstring} % for \IfSubStr
\usepackage[final,tracking=smallcaps,expansion=alltext, protrusion=true]{microtype}
\SetTracking{encoding=*, shape=sc}{50} %latex & friends, page 52
\usepackage{caption}
\usepackage{subcaption}
\usepackage[section]{placeins} % float barriers!
\usepackage{floatpag} % \thisfloatpagestyle
\usepackage{bm}
%\usepackage{tocstyle}\usetocstyle{noonewithdot}
%\usepackage{array}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{mathtools} % for \mathclap
\usepackage{nicefrac}
\usepackage{physics} % for derivatives
\usepackage[separate-uncertainty]{siunitx}
\usepackage{calc}

% -------------- Algorithms --------------
\usepackage{algorithm,algorithmicx}
\usepackage[noend]{algpseudocode}

\newcommand*\Let[2]{\State #1 \(\gets\) #2}
\algrenewcommand\algorithmicrequire{\textbf{Input: }}
\algdef{SE}[DOWHILE]{Do}{doWhile}{\algorithmicdo}[1]{\algorithmicwhile\ #1}

\DeclareMathOperator*{\argmin}{argmin}
\DeclareMathOperator{\BigO}{O}
\newcommand*\from{\colon}

\newcommand\sidetitle[1]{\leavevmode\marginline{\emph{#1}}\ignorespaces}

% Settings for pgfplots
\pgfplotsset{compat=1.9} % TODO: adjust to your installed version
\pgfplotsset{
  % For available color names, see http://www.latextemplates.com/svgnames-colors
  cycle list={CornflowerBlue\\Dandelion\\ForestGreen\\BrickRed\\},
}


% -----------------TOC--------------------
% TODO!
\usepackage{titletoc}

\titlecontents{chapter}
  [0cm]{\bfseries \raggedleft\parshape 1 1cm \dimexpr\linewidth-3cm\relax}
  {\noindent\rule{4cm}{0.1pt}\\ \contentslabel{1.5em}}{}{\hspace{0.8em}\textbullet\hspace{0.8em}\makebox[1em][l]{\thecontentspage}
  }

\titlecontents{section}
  [0cm]{\scshape \raggedleft \parshape 1 1cm \dimexpr\linewidth-3cm\relax}
  {\contentslabel{2em}}{}{\hspace{0.8em}\textbullet\hspace{0.8em}\makebox[1em][l]{\thecontentspage}}

\titlecontents{subsection}
  [0cm]{\itshape \raggedleft\ \parshape 1 1cm \dimexpr\linewidth-3cm\relax}
  {\contentslabel{2.5em}}{}{\hspace{0.8em}\textbullet\hspace{0.8em}\makebox[1em][l]{\thecontentspage}}


% -----------------Headings-----------------
% TODO!
% See https://tex.stackexchange.com/questions/230635/formatting-and-styling-of-headers-using-titlesec-in-scrbook-class
\colorlet{chaptercolor}{gray!80!black}

\setkomafont{chapter}{\normalfont\color{chaptercolor}\Huge\raggedleft}
\setkomafont{chapterprefix}{\Large}
\renewcommand*{\chapterformat}{%
  \makebox[\linewidth][r]{\MakeUppercase{\chapappifchapterprefix{}}}%
  \rlap{\enskip\resizebox{!}{1.2cm}{\thechapter} \rule{15cm}{1.2cm}}%
}

\renewcommand*\chapterheadstartvskip{\vspace{20pt}}
\renewcommand*\chapterheadendvskip{\vspace{20pt}}

\usepackage{varioref}
\usepackage[%
  citecolor=Gray,
  linkcolor=Black, %YellowOrange,
  colorlinks=true]{hyperref}
\usepackage{hyperref}
\usepackage[noabbrev]{cleveref}
\newcommand{\creflastconjunction}{, and\nobreakspace} % use Oxford comma

% For referencing in a form of (equation 5) instead of (equation (5))
% From https://tex.stackexchange.com/questions/263523/is-it-possible-to-remove-parenthesis-from-single-cref-references
\crefformat{equation}{\eqA{}eq.~\eqB #2#1#3)}
% TODO: Fix for more than two equations!
\crefmultiformat{equation}{eqs.~\eqMultiA#2#1#3\eqMultiB}%
{ and\eqMultiA~#2#1#3\eqMultiB}{, \eqMultiA#2#1#3\eqMultiB}{ and~\eqMultiA#2#1#3\eqMultiB}
\newcommand{\eqA}{}
\newcommand{\eqB}{(}
\newcommand{\eqMultiA}{(}
\newcommand{\eqMultiB}{)}
\DeclareRobustCommand{\pcrefSingle}[1]{%
\begingroup%
  \renewcommand{\eqA}{(}\renewcommand{\eqB}{}%
\cref{#1}%
\endgroup
}
\DeclareRobustCommand{\pcrefMulti}[1]{%
\begingroup%
    \renewcommand{\eqMultiA}{}\renewcommand{\eqMultiB}{}%
    (\cref{#1})%
\endgroup
}
\DeclareRobustCommand{\pcref}[1]{%
\IfSubStr{#1}{,}{\pcrefMulti{#1}}{\pcrefSingle{#1}}
}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
